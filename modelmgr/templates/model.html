{% extends "base.html" %}

{% load render_table from django_tables2 %}
{% load perm_filters %}

{% block main %}
<div class="main">
    <div class="toolbar">
        <a data-toggle="modal" class="btn btn-primary" href="#add-edit-model"
            {% if request.user|is_employee and not perms.modelmgr.add_model %}
            disabled='disabled'
            {% endif %}>
            <span class="glyphicon glyphicon-plus"></span> 新增机型
        </a>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">
            机型列表
            {% include "search_form.html" with query=query %}
        </div>
        <div class="panel-body"> 
            {% render_table table "table_template.html" %}
        </div>
    </div>
</div>

{% include "model_modal.html" with modal_id="add-edit-model" f=form %}
{% include "delete_modal.html" with modal_id="delete-model" model_name="机型" %} 

{% endblock %}

{% block js %}
{{ block.super }}
<script type="text/javascript" src="{{ STATIC_URL }}js/modals.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/model.js"></script>
{% endblock %}
